---
title: "ffxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚¤ãƒŠãƒªåŒ–ã—ã¦jsxbinã«åŸ‹ã‚è¾¼ã¿"
date: "2023-09-20"
categories: 
  - "program"
tags: 
  - "script"
---

ã€æ³¨æ„ã€‘ffxã¯å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®AEã§ä½œã‚‹ã“ã¨ï¼ï¼æœ€æ–°ã®AEã§ä½œã£ãŸã‚‰å¤ã„AEã‹ã‚‰ã¯é–‹ã‘ãªã„ã€‚

<!--more-->

```
var f = File("ffxãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹");
f.encoding = 'BINARY'
f.open('e');

var binary;
binary = f.read().toSource();

var myFile = new File("~/Desktop/binaryOutput.txt");
myFile.open("w");
myFile.encoding = "BINARY";
myFile.write(binary);
myFile.close();

$.writeln(binary);

f.close();
```

ä¸Šè¨˜ã‚’å®Ÿè¡Œã™ã‚‹ã¨å‡ºã¦ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ (new String(ã“ã®éƒ¨åˆ†)) ã‚’ã‚³ãƒ”ãƒ¼ã€‚ä¸‹è¨˜ã®â€™BINARYâ€™ã®éƒ¨åˆ†ã«ã‚³ãƒ”ãƒš

```
var pseudoEffectData = {
  name: "YourScriptName",
  matchName: "Pseudo/YourScriptName",
  binary: 'BINARY'
}
```

ã‚“ã§ä¸‹è¨˜ã®ã‚ˆã†ãªé–¢æ•°ã§å‡¦ç†ã‚’ã™ã‚‹ã€‚å…ˆç¨‹ãƒã‚¤ãƒŠãƒªåŒ–ã—ãŸffxã‹ã‚‰ä»»æ„ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ffxã‚’ç”Ÿæˆã—ã¦ãã‚Œã‚’ä½¿ã†ã€ã¿ãŸã„ãªæµã‚Œã€‚ç”Ÿæˆå…ˆãƒ•ã‚©ãƒ«ãƒ€ã¯Folder.UserDataã®aescriptsãƒ•ã‚©ãƒ«ãƒ€å†…ã«ã—ã¦ã„ã‚‹ã€‚

```
function applyPseudoEffect(pseudoEffectData, effectsProp) {
  var pseudoEffect,
    ffxFile,
    writeFile = function (pathToFile, content, encoding) {
      var fileObject = new File(pathToFile);
      fileObject.encoding = encoding || "utf-8";
      fileObject.open("w");
      fileObject.write(content);
      fileObject.close();
      return fileObject;
    },
    makePseudoEffectLive = function (ffxFile) {
      var tempComp, tempLayer;
      tempComp = app.project.items.addComp("tempComp", 100, 100, 1, 1, 24);
      tempLayer = tempComp.layers.addShape();
      tempLayer.applyPreset(ffxFile);
      tempComp.remove();
    };

  if (!effectsProp.canAddProperty(pseudoEffectData.matchName)) {
    var dataPath = Folder.decode(Folder.userData) + '/aescripts/YourScriptName';
    var f = new Folder(dataPath);
    if (!f.exists) f.create();

    ffxFile = writeFile(Folder.userData.fsName + "/aescripts/YourScriptName/" + pseudoEffectData.name + ".ffx", pseudoEffectData.binary, "BINARY");
    makePseudoEffectLive(ffxFile);
  }

  pseudoEffect = effectsProp.addProperty(pseudoEffectData.matchName);
  return pseudoEffect;
}

applyPseudoEffect(pseudoEffectData, textLayer.effect);
```

ref: ğŸ“[After Effects Scripting Tutorial: Embed FFX File in Script](https://youtu.be/FOazhcjKFYU)
